/*! By Microanswer.  url:https://www.microanswer.cn version:1.0.0 */!function(t){var e={};function o(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="./",o(o.s=1)}([function(t,e){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s={width:190,height:250,atomRowCount:21,atomColCount:11,atomBorder:1.5,atomInset:2,atomSpace:3,splitPosition:.7,splitSize:1,fontSize:13,fontHeight:15,background:"#9facaa",color1:"#000000",color2:"#8f9997"},i={score:"Score",best:"Best",level:"Level",pause:"PAUSE",fps:"FPS"};function n(t,e){if("string"==typeof t)this.dom=document.querySelector(t);else{if("object"!==o(t))throw new Error("未知的选择器。");t.jquery&&t.length>0?this.dom=t[0]:this.dom=t}this.option=n.assign({},s,e||{}),this.testspan=this.option.testspan,r.call(this),h.call(this),a.call(this),u.call(this)}function r(){this.atoms=void 0,this.statusAtoms=void 0,this.fps=60,this.score=0,this.paused=!1,this.level=0,this.best=0}function h(){var t=document.createElement("canvas");t.width=t.style.width=this.option.width,t.height=t.style.height=this.option.height,t.style.margin="0",t.style.padding="0",t.style.background=this.option.background,this.canvasDom=t,this.dom.appendChild(t),this.canvas=this.canvasDom.getContext("2d")}function a(){var t={};t.splitPosition=this.option.width*this.option.splitPosition,t.atomSpace=this.option.atomSpace||1,t.atomWidth=(t.splitPosition-t.atomSpace*(this.option.atomColCount+1))/this.option.atomColCount,t.atomHeight=(this.option.height-t.atomSpace*(this.option.atomRowCount+1))/this.option.atomRowCount,t.fontItalic="italic normal "+this.option.fontSize+"px arial",t.fontBold="normal bold "+this.option.fontSize+"px arial",this.drawParam=t}function f(){this.logicFun&&this.logicFun()}function u(){var t=this,e=0,o="";setInterval((function(){t.fps=e,e=0}),1e3),function s(){var i=Date.now();e+=1,f.call(t);var n=Date.now();l.call(t,t.canvas);var r=Date.now();window.requestAnimationFrame?(o="requestAnimationFrame",window.requestAnimationFrame(s)):window.webkitRequestAnimationFrame?(o="webkitRequestAnimationFrame",window.webkitRequestAnimationFrame(s)):(o="setTimeout",setTimeout(s,16));var h=Date.now();t.testspan&&(t.testspan.innerText="逻辑耗时："+(n-i)+"ms, 绘制耗时："+(r-n)+"ms, 帧请求("+o+")耗时："+(h-r)+"ms, 帧间隔:"+(i-t.lastttime)+"ms"),t.lastttime=Date.now()}()}function l(t){t.clearRect(0,0,this.option.width,this.option.height),t.save(),t.beginPath();var e=t.fillStyle;t.fillStyle=this.option.background,t.fillRect(0,0,this.option.width,this.option.height),t.fillStyle=e,c.call(this,t);var o=t.strokeStyle,s=t.lineWidth;t.strokeStyle=this.option.color1,t.lineWidth=this.option.splitSize,t.moveTo(this.drawParam.splitPosition,0),t.lineTo(this.drawParam.splitPosition,this.option.height),t.stroke(),t.strokeStyle=o,t.lineWidth=s,m.call(this,t),t.closePath(),t.restore()}function c(t){var e=this,o=0,s=0,i=t.fillStyle,r=t.strokeStyle,h=t.lineWidth;n.each(e.option.atomRowCount,(function(i,r){o+=e.drawParam.atomSpace,s=0,n.each(e.option.atomColCount,(function(i,n){s+=e.drawParam.atomSpace;var h=0;if(e.atoms?(h=e.atoms[r][n],p.call(e,t,h,o,s)):p.call(e,t,h,o,s),e.animArr){var a=e.animArr[r][n];a!==h&&1===a&&p.call(e,t,a,o,s)}s+=e.drawParam.atomWidth})),o+=e.drawParam.atomHeight})),t.fillStyle=i,t.strokeStyle=r,t.lineWidth=h}function p(t,e,o,s){t.strokeStyle=t.fillStyle=e>0?this.option.color1:this.option.color2,t.lineWidth=this.option.atomBorder,t.strokeRect(s,o,this.drawParam.atomWidth,this.drawParam.atomHeight),t.fillRect(s+this.option.atomInset,o+this.option.atomInset,this.drawParam.atomWidth-2*this.option.atomInset,this.drawParam.atomHeight-2*this.option.atomInset)}function m(t){var e=this,o=t.fillStyle,s=t.lineWidth,r=t.strokeStyle,h=t.font,a=e.option.fontHeight,f=e.drawParam.splitPosition+5;t.strokeStyle=e.option.color1,t.fillStyle=e.option.color1,t.font=e.drawParam.fontItalic,t.fillText(i.score,f,a),t.font=e.drawParam.fontBold,t.fillText(e.score,f,a+=e.option.fontHeight),t.font=e.drawParam.fontItalic,t.fillText(i.level,f,a+=e.option.fontHeight),t.font=e.drawParam.fontBold,t.fillText(e.level,f,a+=e.option.fontHeight);var u=a+5,l=f;n.each(4,(function(o,s){u+=e.drawParam.atomSpace,l=f,n.each(4,(function(o,i){l+=e.drawParam.atomSpace,p.call(e,t,e.statusAtoms?e.statusAtoms[s][i]:0,u,l),l+=e.drawParam.atomWidth})),u+=e.drawParam.atomHeight})),a=u+5,t.strokeStyle=t.fillStyle=e.option.color1,t.font=e.drawParam.fontItalic,t.fillText(i.best,f,a+=e.option.fontHeight),t.font=e.drawParam.fontBold,t.fillText(e.best,f,a+=e.option.fontHeight),a+=5,t.fillStyle=e.paused?e.option.color1:e.option.color2,t.font=e.drawParam.fontItalic,t.fillText(i.pause,f,a+=e.option.fontHeight),t.strokeStyle=t.fillStyle=e.option.color1,t.font=e.drawParam.fontItalic,t.fillText(i.fps,f,e.option.height-e.option.fontHeight-2),t.font=e.drawParam.fontBold,t.fillText(e.fps,f,e.option.height-2),t.font=h,t.strokeStyle=r,t.fillStyle=o,t.lineWidth=s}function w(t,e,o){var s=this;if(e<t.animArr.length){var i=function(e){var o=r[e];if(o)return s.animResult!==t?"kill":void(s.animArr=o)},r=t.animArr[e],h=t.animTime[e];n.scroll(0,r.length,{goo:i,end:function(n){i(n),o&&o(t.animName,e),w.call(s,t,e+1,o)},kill:function(){o&&o(t.animName,-1)}},h)}else s.animArr=void 0}function d(){return this.makeNewArr((function(t,e){return[t,e]}))}n.prototype.reset=function(){r.call(this)},n.prototype.makeNewArr=function(t){var e=this,o=[];return n.each(e.option.atomRowCount,(function(s,i){o[i]=[],n.each(e.option.atomColCount,(function(e,s){o[i][s]=t?t(i,s):0}))})),o},n.prototype.playAnim=function(t,e){if(!t)throw new Error("请指定要执行的动画。");var o=t.call(this);if(o.animArr.length!==o.animTime.length)throw new Error("时间配置与动画不匹配。");this.animArr=this.makeNewArr(),this.animResult=o,w.call(this,o,0,e)},n.prototype.updateAtomArr=function(t){this.atoms=void 0,this.atoms=t},n.prototype.updateStatusAtoms=function(t){this.statusAtoms=void 0,this.statusAtoms=t},n.prototype.regLogic=function(t){this.logicFun=t},n.prototype.setLevel=function(t){this.level=t},n.prototype.setScore=function(t){this.score=t},n.prototype.setPause=function(t){this.paused=t},n.prototype.setBest=function(t){this.best=t},n.assign=function(){var t=arguments[0];if(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];if(o)for(var s in o)t[s]=o[s]}return t}},n.each=function(t,e){if(t)if(Array.isArray(t))for(var o=0;o<t.length;o++)e&&e(t[o],o,t);else if(Number.isInteger(t))for(var s=1;s<=t;s++)e&&e(s,s-1,t)},n.each2=function(t,e){t&&e&&n.each(t.length,(function(o,s){n.each(o,(function(o,i){e(o,s,i,t)}))}))},n.scroll=function(t,e,o,s){var i=t,n=i=i||0,r=e-n;if(0!==r){var h=!1,a=s||500,f=Date.now();!function t(){setTimeout((function(){var s=Date.now()-f,i=s/a,u=n+Math.floor(i*r);if(!h&&"kill"===(o&&o.goo&&o.goo(u)))return void(o.kill&&o.kill());a<=s?(h=!0,o.end(e)):setTimeout(t,1e3/60)}),1e3/60)}()}else o&&o.end&&o.end(e)},n.mergeArr=function(t,e,o,s,i){o=o||0,s=s||0,n.each(t,(function(t,r){n.each(t,(function(t,n){if(r+o<e.length&&n+s<e[r].length){var h=r+o,a=n+s;if(a<0||h<0)return;e[h][a]=i?i(h,a,r,n):t}}))}))},n.mergeArr2=function(t,e,o,s,i){o=o||0,s=s||0;var r=[];return n.each(e,(function(e,h){r[h]=[],n.each(e,(function(e,n){r[h][n]=e,h>=o&&n>=s&&h<o+t.length&&n<s+t[0].length&&(r[h][n]=i?i(h,n,h-o,n-s):t[h-o][n-s])}))})),r},n.random=function(t,e){return Math.floor(Math.random()*(e-t)+t)},n.arrCopy=function(t){for(var e=[],o=0;o<t.length;o++)Array.isArray(t[o])?e[o]=n.arrCopy(t[o]):e[o]=t[o];return e};var v={getItem:function(t){console.warn("getItem不支持localstorage、sessionstorage")},setItem:function(t,e){console.warn("setItem不支持localstorage、sessionstorage")},removeItem:function(t){console.warn("removeItem不支持localstorage、sessionstorage")}};function g(t){t=t||{},this.height=4,this.width=4,this.time=50,this.offsetRow=t.offsetRow,this.offsetCol=t.offsetCol,this.frams=[[[1,0,0,1],[0,1,1,0],[0,1,1,0],[1,0,0,1]],[[0,1,1,0],[1,0,0,1],[1,0,0,1],[0,1,1,0]]],this.currentFram=0,this.keepTime=t.keepTime||1e3;var e=this;setTimeout((function(){t.onEnd&&t.onEnd.call(e)}),this.keepTime)}n.storeGet=function(t){var e=(localStorage||sessionStorage||v).getItem(t);return e?JSON.parse(e):e},n.storeSet=function(t,e){return(localStorage||sessionStorage||v).setItem(t,JSON.stringify(e))},n.storeRemove=function(t){return(localStorage||sessionStorage||v).removeItem(t)},n.ANIM={CIRCLE:function(){for(var t=this,e=[],o="l",s=t.option.atomRowCount*t.option.atomColCount,i=d.call(t);e.length<s;){var r=void 0;if("l"===o){for(r=0;r<i.length;r++)e.push(i[r].shift());o="b"}else if("b"===o){var h=i.pop();for(r=0;r<h.length;r++)e.push(h[r]);o="r"}else if("r"===o){for(r=i.length-1;r>=0;r--)e.push(i[r].pop());o="t"}else if("t"===o){var a=i.shift();for(r=a.length-1;r>=0;r--)e.push(a[r]);o="l"}}var f=[];return n.each(e,(function(o,s){var i=t.makeNewArr();n.each(s+1,(function(t,o){var s=e[o];i[s[0]][s[1]]=1})),f.push(i)})),{animName:"CIRCLE",animArr:[f,f.concat([]).reverse()],animTime:[2e3,2e3]}},B2T:function(){var t=this,e=[];return n.each(t.option.atomRowCount,(function(o,s){s=t.option.atomRowCount-o;for(var i=t.makeNewArr(),n=s;n<t.option.atomRowCount;n++)for(var r=0;r<t.option.atomColCount;r++)i[n][r]=1;e.push(i)})),{animName:"B2T",animArr:[e,e.concat([]).reverse()],animTime:[700,700]}},T2B:function(){var t=this,e=[];return n.each(t.option.atomRowCount,(function(o,s){for(var i=t.makeNewArr(),n=0;n<=s;n++)for(var r=0;r<t.option.atomColCount;r++)i[n][r]=1;e.push(i)})),{animName:"T2B",animArr:[e,e.concat([]).reverse()],animTime:[700,700]}},COP:function(){for(var t=[],e=0,o=0,s=0;;){var i=e,n=this.option.atomRowCount-(e+1),r=this.makeNewArr();for(o=0;o<=i;o++)for(s=0;s<this.option.atomColCount;s++)r[o][s]=1;for(o=this.option.atomRowCount-1;o>=n;o--)for(s=0;s<this.option.atomColCount;s++)r[o][s]=1;if(t.push(r),i===n||1===Math.abs(i-n))break;e++}return{animName:"COP",animArr:[t,t.concat([]).reverse()],animTime:[600,600]}}},n.LETTER={A:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1]],B:[[1,1,1,1,0],[0,1,0,0,1],[0,1,1,1,0],[0,1,0,0,1],[1,1,1,1,0]],C:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,0],[1,0,0,0,1],[0,1,1,1,0]],D:[[1,1,1,1,0],[0,1,0,0,1],[0,1,0,0,1],[0,1,0,0,1],[1,1,1,1,0]],E:[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,0],[1,0,0,0,0],[1,1,1,1,1]],F:[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0]],G:[[0,1,1,1,0],[1,0,0,0,0],[1,0,1,1,1],[1,0,0,0,1],[0,1,1,1,0]],H:[[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1]],I:[[0,1,1,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,1,1,1,0]],J:[[0,1,1,1,0],[0,0,0,1,0],[0,0,0,1,0],[1,0,0,1,0],[0,1,1,0,0]],K:[[0,1,0,0,1],[0,1,0,1,0],[0,1,1,0,0],[0,1,0,1,0],[0,1,0,0,1]],L:[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,0]],M:[[1,1,1,1,0],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1]],N:[[1,0,0,0,1],[1,1,0,0,1],[1,0,1,0,1],[1,0,0,1,1],[1,0,0,0,1]],O:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],P:[[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0]],Q:[[0,1,1,0,0],[1,0,0,1,0],[1,0,0,1,0],[1,0,0,1,0],[0,1,1,1,1]],R:[[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0],[1,0,1,0,0],[1,0,0,1,1]],S:[[0,1,1,1,1],[1,0,0,0,0],[0,1,1,1,0],[0,0,0,0,1],[1,1,1,1,0]],T:[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],U:[[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],V:[[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0]],W:[[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[1,1,1,1,0]],X:[[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0],[0,1,0,1,0],[1,0,0,0,1]],Y:[[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],Z:[[1,1,1,1,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,1,1,1,1]]},g.prototype.update=function(){Date.now()-(this.lastTime||0)>=this.time&&(this.currentFram=0===this.currentFram?1:0,this.lastTime=Date.now())},g.prototype.getCurrentFrame=function(){return this.frams[this.currentFram]},g.prototype.render=function(t){n.mergeArr(this.getCurrentFrame(),t,this.offsetRow,this.offsetCol,void 0)},e.WzwBomb=g,e.WzwScreen=n},function(t,e,o){var s=o(2).WzwLauncher,i=o(3).Clicker,n=o(4),r=new s("#screen",{testspan:document.querySelector("#testspan")});r.regGame("A",new n.Tank),r.regGame("B",new n.Speed),r.regGame("C",new n.Tetris),r.regGame("D",new n.Snake),r.regGame("E",new n.Copyor);var h={};function a(t){r.onKeyUp(t),function(t){var e=document.querySelector("#"+t);e.className=e.className.replace(/ active/g,"")}(t);var e=h[t];e&&e.release()}function f(t){var e=h[t];e||(e=h[t]=new i).onClick((function(){r.onKeyDown(t),function(t){var e=document.querySelector("#"+t);e.className.indexOf("active")<0&&(e.className=e.className+" active")}(t)})),e.push()}var u={87:function(){a("up")},38:function(){a("up")},65:function(){a("left")},37:function(){a("left")},83:function(){a("down")},40:function(){a("down")},68:function(){a("right")},39:function(){a("right")},32:function(){a("rotate")},13:function(){a("rotate")},90:function(){a("start")},88:function(){a("voice")},67:function(){a("onoff")},86:function(){a("reset")}},l={87:function(){f("up")},38:function(){f("up")},65:function(){f("left")},37:function(){f("left")},83:function(){f("down")},40:function(){f("down")},68:function(){f("right")},39:function(){f("right")},32:function(){f("rotate")},13:function(){f("rotate")},90:function(){f("start")},88:function(){f("voice")},67:function(){f("onoff")},86:function(){f("reset")}};window.onkeyup=function(t){var e=u[String(t.keyCode).toLowerCase()];e&&e(),t.stopPropagation(),t.preventDefault?t.preventDefault():(t.returnValue=!1,window.event.returnValue=!1)},window.onkeydown=function(t){var e=l[String(t.keyCode).toLowerCase()];e&&e(),t.stopPropagation(),t.preventDefault?t.preventDefault():(t.returnValue=!1,window.event.returnValue=!1)};var c="mousedown",p="mouseup",m=navigator.userAgent;(m.indexOf("Android")>-1||m.indexOf("Linux")>-1||m.indexOf("iPhone")>-1)&&(c="touchstart",p="touchend");for(var w=document.querySelectorAll("button.btn[id]"),d=0;d<w.length;d++)w[d].addEventListener(c,(function(t){f(this.id),t.stopPropagation(),t.preventDefault?t.preventDefault():(t.returnValue=!1,window.event.returnValue=!1)})),w[d].addEventListener(p,(function(t){a(this.id),t.stopPropagation(),t.preventDefault?t.preventDefault():(t.returnValue=!1,window.event.returnValue=!1)}));setTimeout((function(){r.reboot()}),500)},function(t,e,o){var s=o(0).WzwScreen;function i(t,e){this.screen=new s(t,e),this.games=[],this.atoms=void 0,this.currentGame=void 0,this.screen.regLogic(h.bind(this)),this.letterCache={},this.current=0,this.status=i.STATUS.OFFED}function n(t){this.status!==i.STATUS.OFFED&&this.status!==i.STATUS.OFFINGHALF&&(!this.games||this.games.length<1||this.currentGame&&this.currentGame.onKeyDown&&this.currentGame.onKeyDown(t))}function r(t){if(this.status!==i.STATUS.OFFED){if(this.status===i.STATUS.BOOTED||this.status===i.STATUS.GAMEING){if("onoff"===t)return void this.turnOff();if(!this.games||this.games.length<1)return;if(this.currentGame)this.currentGame.onKeyup&&this.currentGame.onKeyup(t);else{if("rotate"===t)return void(this.current>=this.games.length-1?this.current=0:this.current++);if("start"===t)return void this.start()}if("reset"===t)return void this.reboot()}}else"onoff"===t&&this.reboot()}function h(){if(this.status===i.STATUS.OFFED||this.status===i.STATUS.OFFINGHALF)return this.screen.updateAtomArr(null),this.screen.updateStatusAtoms(null),this.screen.setScore(0),this.screen.setLevel(0),this.screen.setBest(0),void this.screen.setPause(!1);if(this.status!==i.STATUS.BOOTING){if(!this.games||this.games.length<=0)return this.atoms=a.call(this),this.screen.updateAtomArr(this.atoms),void this.screen.updateStatusAtoms(null);this.currentGame?(this.atoms=this.currentGame.onUpdate(),this.statusAtoms=this.currentGame.onUpdateStatus()):(this.atoms=f.call(this),this.statusAtoms=void 0),this.screen.updateAtomArr(this.atoms),this.screen.updateStatusAtoms(this.statusAtoms)}}function a(){if(this.emptyArr)return this.emptyArr;var t=this,e=Math.floor(t.screen.option.atomRowCount/2)-4;return this.emptyArr=t.screen.makeNewArr((function(o,s){return o<e||o>=t.screen.option.atomRowCount-e?1:0})),s.mergeArr(s.LETTER.M,t.emptyArr,e+1,2),console.log("目前还没有注册任何游戏。"),this.emptyArr}function f(){var t=this.games[this.current],e=this.letterCache[t.letter],o=Math.floor(this.screen.option.atomRowCount/2);if(!e){var i=s.LETTER[t.letter];e=this.screen.makeNewArr((function(t,e){if(t<=o){var s=t-3,n=e-3;return i.length>s&&s>-1&&i[s].length>n&&n>-1?0===i[s][n]?1:0:1}return 0})),this.letterCache[t.letter]=e}return s.mergeArr(t.game.getPreviewAtoms(),e,o+1,0),e}i.prototype.regGame=function(t,e){this.games.push({game:e,letter:t}),e.onRegLaunch(this)},i.prototype.nextGame=function(){this.currentGame||this.current>=this.games.length-1||this.current++},i.prototype.prevGame=function(){this.currentGame||this.current<=0||this.current--},i.prototype.start=function(){var t=this;t.starting||(t.starting=!0,t.status===i.STATUS.BOOTED&&t.games.length>0&&(t.currentGame||(t.status=i.STATUS.GAMEING,t.screen.playAnim(s.ANIM.COP,(function(e,o){0===o?(t.currentGame=t.games[t.current].game,t.starting=!1):1===o?t.currentGame.onLaunch():-1===o&&(t.currentGame?t.status=i.STATUS.GAMEING:t.status=i.STATUS.BOOTED,t.starting=!1)})))))},i.prototype.exitCurentGame=function(){this.status=i.STATUS.BOOTED,this.currentGame=void 0},i.prototype.reboot=function(){var t=this;t.status=i.STATUS.BOOTING,t.screen.playAnim(s.ANIM.CIRCLE,(function(e,o){0===o?(t.status=i.STATUS.BOOTINGHALF,t.currentGame&&(t.currentGame.onDestroy&&t.currentGame.onDestroy(),t.screen.setPause(!1),t.screen.setScore(0),t.screen.setLevel(0),t.screen.setBest(0)),t.currentGame=null):1===o&&(t.status=i.STATUS.BOOTED)}))},i.prototype.turnOff=function(){var t=this;t.status=i.STATUS.OFFING,t.screen.playAnim(s.ANIM.T2B,(function(e,o){0===o?t.status=i.STATUS.OFFINGHALF:1===o&&(t.status=i.STATUS.OFFED,t.current=0,t.currentGame=null)}))},i.prototype.onKeyUp=function(t){r.call(this,t)},i.prototype.onKeyDown=function(t){n.call(this,t)},i.STATUS={BOOTING:2,BOOTINGHALF:3,BOOTED:4,GAMEING:5,OFFING:6,OFFINGHALF:7,OFFED:8},e.WzwLauncher=i},function(t,e){function o(t){this.option=t||{timeout:240,dely:45},this.clicks=[],this.tasks=[]}function s(){for(var t=this.clicks||[],e=0;e<t.length;e++){var o=t[e];o&&o()}}o.prototype.onClick=function(t){this.clicks.push(t)},o.prototype.push=function(t,e){if(!this.holding){this.holding=!0,e=e||this.option.timeout,s.call(this,t);var o=this;o.tasks.push(setTimeout((function e(){o.holding&&(s.call(o,t),o.tasks.push(setTimeout(e,o.option.dely)))}),e))}},o.prototype.release=function(){for(this.holding=!1;this.tasks.length>0;){var t=this.tasks.shift();clearTimeout(t)}},e.Clicker=o},function(t,e,o){var s=o(5).Snake,i=o(6).Tank,n=o(7).Tetris,r=o(8).Copyor,h=o(9).Speed;t.exports={Snake:s,Tank:i,Tetris:n,Copyor:r,Speed:h}},function(t,e,o){var s=o(0),i=s.WzwScreen,n=s.WzwBomb,r=1,h=2,a=3,f=4;function u(t,e,o,s,i){this.offsetRow=t,this.offsetCol=e,this.direction=o,this.pre=s,this.next=i}function l(){this.timeSpace=320,this.initPreview()}u.prototype.pushFood=function(t){this.food=t},u.prototype.update=function(){if(this.food){var t=this.next;this.next=new u(this.food[0],this.food[1],void 0,this,t),t.pre=this.next,this.food=void 0}else this.next&&this.next.update();if(this.pre)this.offsetRow=this.pre.offsetRow,this.offsetCol=this.pre.offsetCol;else switch(this.nextDirection&&(this.direction=this.nextDirection,this.nextDirection=void 0),this.direction){case r:this.offsetRow-=1;break;case f:this.offsetCol-=1;break;case a:this.offsetRow+=1;break;case h:this.offsetCol+=1}},u.prototype.applyAtoms=function(t){this.next&&this.next.applyAtoms(t);try{t[this.offsetRow][this.offsetCol]=1}catch(t){}},u.prototype.turnTo=function(t){this.pre||(this.direction===a&&t!==r||this.direction===f&&t!==h||this.direction===h&&t!==f||this.direction===r&&t!==a)&&(this.nextDirection=t)},u.prototype.isAtomsIn=function(t,e){return this.offsetRow===t&&this.offsetCol===e||!!this.next&&this.next.isAtomsIn(t,e)},l.prototype.onRegLaunch=function(t){this.launch=t},l.prototype.getPreviewAtoms=function(){var t;return Date.now()-(this.previewLastTime||0)>=this.previewTimeSpace&&(t=this.previewArr[this.previewIndex],this.previewIndex++,this.previewIndex>=this.previewArr.length-1&&(this.previewIndex=0),this.previewLastTime=Date.now()),t},l.prototype.onLaunch=function(){var t=parseInt(this.launch.screen.option.atomRowCount/2),e=parseInt(this.launch.screen.option.atomColCount/2);this.snakeHead=new u(t,e,r,void 0,void 0);var o=new u(this.snakeHead.offsetRow+1,e,null,this.snakeHead,void 0);this.snakeHead.next=o,o.next=new u(o.offsetRow+1,e,null,o,void 0),this.food=this.makeFood(),this.live=!0,this.paused=!1,this.score=0,this.best=i.storeGet("snakeBest")||0,this.launch.screen.setBest(this.best)},l.prototype.onUpdate=function(){if(this.atoms=this.launch.screen.makeNewArr(),this.snakeHead){if(Date.now()-(this.gameLastTime||0)>(this.turbo?30:this.timeSpace)){if(this.food&&this.snakeHead.isAtomsIn(this.food[0],this.food[1])&&(this.score+=1,this.launch.screen.setScore(this.score),this.score>=this.best&&(this.best=this.score,this.launch.screen.setBest(this.best),i.storeSet("snakeBest",this.best)),this.snakeHead.pushFood(this.food),this.food=this.makeFood()),this.live&&!this.paused&&this.snakeHead.update(),(this.snakeHead.next.isAtomsIn(this.snakeHead.offsetRow,this.snakeHead.offsetCol)||this.snakeHead.offsetRow<0||this.snakeHead.offsetCol<0||this.snakeHead.offsetRow>=this.launch.screen.option.atomRowCount||this.snakeHead.offsetCol>=this.launch.screen.option.atomColCount)&&(this.live=!1),!this.live&&!this.bomb){var t=this;this.bomb=new n({offsetRow:t.snakeHead.offsetRow-2,offsetCol:t.snakeHead.offsetCol-2,onEnd:function(){t.uiGameover()}})}this.gameLastTime=Date.now()}this.atoms&&(this.food&&Date.now()-(this.foodLastTime||0)>60&&(this.atoms[this.food[0]][this.food[1]]=1===this.atoms[this.food[0]][this.food[1]]?0:1,this.foodLastTime=Date.now()),this.snakeHead.applyAtoms(this.atoms))}return this.atoms&&this.bomb&&(this.bomb.update(),i.mergeArr(this.bomb.getCurrentFrame(),this.atoms,this.bomb.offsetRow,this.bomb.offsetCol)),this.atoms},l.prototype.onUpdateStatus=function(){},l.prototype.onDestroy=function(){this.launch.screen.setScore(0),this.launch.screen.setBest(0),this.launch.screen.setPause(!1),this.launch.screen.setLevel(0),this.snakeHead=void 0,this.bomb=void 0,this.live=!1,this.turbo=!1,this.food=void 0,this.paused=!1,this.best=0,this.launch.exitCurentGame()},l.prototype.onKeyup=function(t){"rotate"===t&&(this.turbo=!1)},l.prototype.onKeyDown=function(t){if("start"===t&&(this.paused=!this.paused,this.launch.screen.setPause(this.paused)),this.snakeHead){if(this.paused)return;switch(t){case"up":this.snakeHead.turnTo(r);break;case"right":this.snakeHead.turnTo(h);break;case"down":this.snakeHead.turnTo(a);break;case"left":this.snakeHead.turnTo(f);break;case"rotate":this.turbo=!0}}},l.prototype.initPreview=function(){this.previewIndex=0,this.previewTimeSpace=200,this.previewArr=[[[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,1,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,1,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,1,0,0,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,1,1,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,1,1,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,1,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,1,0],[0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,1,1,0],[0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,1,1,1,0],[0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,1,1,1,1,0],[0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,1,1,1,1,1,0],[0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,1,1,1,1,1,1,0],[0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]]]},l.prototype.makeFood=function(){var t=[i.random(0,this.launch.screen.option.atomRowCount),i.random(0,this.launch.screen.option.atomColCount)];if(this.snakeHead)for(;this.snakeHead.isAtomsIn(t[0],t[1]);)t=[i.random(0,this.launch.screen.option.atomRowCount),i.random(0,this.launch.screen.option.atomColCount)];return t},l.prototype.uiGameover=function(){var t=this;this.launch.screen.playAnim(i.ANIM.B2T,(function(e,o){0===o&&t.onDestroy()}))},e.Snake=l},function(t,e,o){var s=o(0),i=s.WzwScreen,n=s.WzwBomb,r=[550,540,530,520,500,490,480,470,450,430,410,400,380,350,340,330,300,280,260,240,200],h={0:15,1:20,2:25,3:32,4:40,5:50,6:60,7:75,8:90,9:100,10:110,11:120,12:130,13:140,14:150,15:160,16:170,17:180,18:190,19:200,20:300},a=1,f=2,u=1,l=2,c=3,p=4,m=function(){return[[0,1,0],[1,1,1],[1,0,1]]},w=function(){return[[1,1,0],[0,1,1],[1,1,0]]},d=function(){return[[1,0,1],[1,1,1],[0,1,0]]},v=function(){return[[0,1,1],[1,1,0],[0,1,1]]},g=1,y=2,C=3,k=6;function b(t,e){this.tanker=t,this.direction=this.tanker.direction,this.time=42,this.available=!0,this.onUnAvailable=e,this.initBallOffset()}function S(t,e,o,s,i){this.width=3,this.height=3,this.offsetRow=t,this.offsetCol=e,this.role=o,this.direction=s,this.balls=[],this.tank=i,this.launch=i.launch,this.heropointtime=20,this.initAtoms(),this.init()}function A(t,e,o,s){this.boss=!0,this.direction=c,this.offsetRow=-8,this.offsetCol=t,this.hp=e,this.tank=s,this.launch=s.launch,this.balls=[],this.role=f,this.fram=[[1,1,0,0,0,1,1],[0,1,0,0,0,1,0],[1,0,1,1,1,0,1],[0,1,1,0,1,1,0],[1,0,1,1,1,0,1],[0,1,0,1,0,1,0],[1,1,0,1,0,1,1],[0,0,0,1,0,0,0]],this.status=A.STATUS.SHOWING,this.moveStepTime=o,this.way="left",this.wayCount=1,this.showingStepTime=100}function T(){R.call(this)}function R(){this.preview_index=0,this.preview_lasttime=Date.now(),this.preview_timespace=200,this.previewAtom=[[[1,0,1,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,1,0,0,0],[0,0,1,1,0,0,0,0,0,0,0]],[[1,0,1,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,1,0],[0,0,1,1,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,0,1,0,0],[0,0,1,1,0,0,0,0,0,0,0]],[[1,0,1,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,0,0,0,0,1,0],[0,0,0,0,1,1,0,0,0,1,0],[0,0,0,1,1,0,0,0,0,0,0]],[[1,1,0,0,0,0,0,0,0,0,0],[0,1,1,0,0,0,0,0,0,1,0],[1,1,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0],[0,1,0,0,0,1,1,0,0,1,1],[0,0,0,0,1,1,0,0,0,0,0]],[[0,1,1,0,0,0,0,0,0,0,0],[0,0,1,1,1,0,0,0,0,1,0],[0,1,1,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,0],[0,1,0,0,0,1,1,0,0,1,0]],[[0,1,1,0,0,0,0,0,0,1,0],[0,0,1,1,0,1,0,0,1,1,1],[0,1,1,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0]],[[0,1,1,0,0,0,0,0,0,1,1],[0,0,1,1,0,0,1,0,1,1,0],[0,1,1,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,1,0,1,0,0,0,0,0,1,1],[0,1,1,1,0,0,0,1,1,1,0],[0,0,1,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,0,0,0],[0,1,1,1,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,0,0,0],[0,1,1,1,0,0,1,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,1,0,0,0,0],[0,1,1,1,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]]]}function O(){this.level=0,this.shotCount=0,this.score=0,this.best=i.storeGet("tankBest")||0,this.launch.screen.setBest(this.best),this.lifes=[[0,0,0,0]],this.lifeCount=3;for(var t=0;t<this.lifeCount;t++)this.lifes.push([1,1,1,1]);D.call(this)}function D(){if(this.bomb=void 0,this.hreo=I.call(this),!this.hreo)return this.status=k,void P.call(this);this.tankers=[],this.status=g}function I(){if(this.lifeCount<=0)return null;this.lifeCount=this.lifeCount-1;for(var t=0;t<4-this.lifeCount;t++)this.lifes[t]=[0,0,0,0];var e=9,o=4;return this.bossMod&&(e=this.launch.screen.option.atomRowCount-3,o=0),new S(e,o,a,u,this)}function x(){if(!(this.tankers.length>=3)){var t=L.call(this,this.tankers,this.hreo),e=t[i.random(0,t.length)];"top_left"===e?this.tankers.push(new S(0,0,f,c,this)):"top_right"===e?this.tankers.push(new S(0,this.launch.screen.option.atomColCount-3,f,c,this)):"bottom_left"===e?this.tankers.push(new S(this.launch.screen.option.atomRowCount-3,0,f,u,this)):"bottom_right"===e&&this.tankers.push(new S(this.launch.screen.option.atomRowCount-3,this.launch.screen.option.atomColCount-3,f,u,this))}}function L(t,e){var o=[];return B(this.topLeftJudgeArr=this.topLeftJudgeArr||[[0,2],[1,2],[2,2],[2,0],[2,1]],t,e)||o.push("top_left"),B(this.topRightJudgeArr=this.topRightJudgeArr||[[0,this.launch.screen.option.atomColCount-3],[1,this.launch.screen.option.atomColCount-3],[2,this.launch.screen.option.atomColCount-3],[2,this.launch.screen.option.atomColCount-2],[2,this.launch.screen.option.atomColCount-1]],t,e)||o.push("top_right"),B(this.bottomLeftJudgeArr=this.bottomLeftJudgeArr||[[this.launch.screen.option.atomRowCount-1,2],[this.launch.screen.option.atomRowCount-2,2],[this.launch.screen.option.atomRowCount-3,2],[this.launch.screen.option.atomRowCount-3,1],[this.launch.screen.option.atomRowCount-3,0]],t,e)||o.push("bottom_left"),B(this.bottomRightJudgeArr=this.bottomRightJudgeArr||[[this.launch.screen.option.atomRowCount-1,this.launch.screen.option.atomColCount-3],[this.launch.screen.option.atomRowCount-2,this.launch.screen.option.atomColCount-3],[this.launch.screen.option.atomRowCount-3,this.launch.screen.option.atomColCount-3],[this.launch.screen.option.atomRowCount-3,this.launch.screen.option.atomColCount-2],[this.launch.screen.option.atomRowCount-3,this.launch.screen.option.atomColCount-1]],t,e)||o.push("bottom_right"),o}function B(t,e,o){for(var s=0;s<t.length;s++){for(var i=0;i<e.length;i++)if(e[i].isAtomIn(t[s][0],t[s][1]))return!0;if(o&&o.isAtomIn(t[s][0],t[s][1]))return!0}return!1}function P(){var t=this;t.status=C,t.launch.screen.playAnim(i.ANIM.B2T,(function(e,o){0===o&&(t.onDestroy(),t.launch.exitCurentGame())}))}b.prototype.initBallOffset=function(){if(this.tanker.boss)return this.offsetRow=this.tanker.offsetRow+7,void(this.offsetCol=this.tanker.offsetCol+3);if(this.tanker.direction===u)this.offsetRow=this.tanker.offsetRow,this.offsetCol=this.tanker.offsetCol+1;else if(this.tanker.direction===l)this.offsetRow=this.tanker.offsetRow+1,this.offsetCol=this.tanker.offsetCol+2;else if(this.tanker.direction===c)this.offsetRow=this.tanker.offsetRow+2,this.offsetCol=this.tanker.offsetCol+1;else{if(this.tanker.direction!==p)throw new Error("未知的坦克方向。");this.offsetRow=this.tanker.offsetRow+1,this.offsetCol=this.tanker.offsetCol}},b.prototype.update=function(){this.available&&(Date.now()-(this.lastTime||0)>=this.time&&(this.direction===u?this.offsetRow=this.offsetRow-1:this.direction===l?this.offsetCol=this.offsetCol+1:this.direction===c?this.offsetRow=this.offsetRow+1:this.direction===p&&(this.offsetCol=this.offsetCol-1),this.lastTime=Date.now()),this.offsetAvailable(),this.checkKilled())},b.prototype.offsetAvailable=function(){(this.offsetRow<0||this.offsetRow>=this.tanker.launch.screen.option.atomRowCount||this.offsetCol<0||this.offsetCol>=this.tanker.launch.screen.option.atomColCount)&&(this.available=!1,this.onUnAvailable&&this.onUnAvailable(this))},b.prototype.checkKilled=function(){var t=this;try{if(t.tanker.role===a){if(i.each(t.tanker.tank.tankers,(function(e,o){if(e.isAtomIn(t.offsetRow,t.offsetCol))throw{message:"killed",index:o,tanker:e}})),t.tanker.tank.boss&&t.tanker.tank.boss.isAtomIn(t.offsetRow,t.offsetCol)){if(t.tanker.tank.boss.isAtomInGun(t.offsetRow,t.offsetCol))throw{message:"killed",index:0,tanker:t.tanker.tank.boss};throw{message:"hited",index:0}}}else if(t.tanker.role===f){if(t.tanker.tank.hreo&&t.tanker.tank.hreo.isAtomIn(t.offsetRow,t.offsetCol))throw{message:"killed",index:0,tanker:t.tanker.tank.hreo};if(t.tanker.tank.hreo&&t.tanker.tank.hreo.isAtomInAtom(t.offsetRow,t.offsetCol))throw{message:"hited",index:0}}}catch(e){"killed"===e.message?(e.tanker.role===f?e.tanker.boss?t.tanker.tank.onBossKill():(t.tanker.tank.tankers.splice(e.index,1),t.tanker.tank.onEofKill()):e.tanker.role===a&&t.available&&t.tanker.tank.status===g&&t.tanker.tank.onHeroKill(),t.available=!1,t.onUnAvailable&&t.onUnAvailable(t)):"hited"===e.message?(t.available=!1,t.onUnAvailable&&t.onUnAvailable(t)):console.warn("异常：",e)}},S.prototype.init=function(){this.role===f&&i.random(0,10)>6&&this.shoot()},S.prototype.initAtoms=function(){switch(this.direction){case u:this.atoms=m();break;case l:this.atoms=w();break;case c:this.atoms=d();break;case p:this.atoms=v();break;default:throw new Error("不支持的方向")}},S.prototype.applyAtom=function(t){for(var e=0;e<this.height;e++)for(var o=0;o<this.width;o++)(1===e&&1===o||1===this.atoms[e][o])&&(t[this.offsetRow+e][this.offsetCol+o]=this.atoms[e][o]);for(var s=0;s<this.balls.length;s++){var i=this.balls[s];i.available&&(t[i.offsetRow][i.offsetCol]=1)}},S.prototype.update=function(){this.role===a&&Date.now()-(this.heropointLastTime||0)>=this.heropointtime&&(this.atoms[1][1]=1===this.atoms[1][1]?0:1,this.heropointLastTime=Date.now());for(var t=0;t<this.balls.length;t++)this.balls[t].available&&this.balls[t].update()},S.prototype.updateEOF=function(){i.random(0,100)>=30?this.moveTo(this.direction,1):this.moveTo(this.getDiffDirection(),1),i.random(0,100)>=70&&this.shoot()},S.prototype.turnTo=function(t){this.atoms=m(),this.direction=u},S.prototype.moveTo=function(t,e){switch(t){case u:this.moveToUp(e);break;case l:this.moveToRight(e);break;case c:this.moveToBottom(e);break;case p:this.moveToLeft(e);break;default:throw new Error("未知的方向:"+t)}},S.prototype.moveToUp=function(t,e){if(this.direction!==u&&!e)return this.direction=u,void(this.atoms=m());this.offsetRow<=0||this.hasTankerOn(u)||(this.offsetRow-=t)},S.prototype.moveToRight=function(t,e){if(this.direction!==l&&!e)return this.direction=l,void(this.atoms=w());this.offsetCol+2>=this.launch.screen.option.atomColCount-1||this.hasTankerOn(l)||(this.offsetCol+=t)},S.prototype.moveToBottom=function(t,e){if(this.direction!==c&&!e)return this.direction=c,void(this.atoms=d());this.offsetRow+2>=this.launch.screen.option.atomRowCount-1||this.hasTankerOn(c)||(this.offsetRow+=t)},S.prototype.moveToLeft=function(t,e){if(this.direction!==p&&!e)return this.direction=p,void(this.atoms=v());this.offsetCol<=0||this.hasTankerOn(p)||(this.offsetCol-=t)},S.prototype.hasTankerOn=function(t){try{var e=0,o=0;switch(t){case p:e=-1;break;case u:o=-1;break;case l:e=1;break;case c:o=1}var s=this,n=s.getSideAtoms(t);i.each(s.tank.tankers,(function(t){s!==t&&i.each(n,(function(s){if(t.isAtomIn(s[0]+o,s[1]+e))throw"yes"}))})),s.role===f&&i.each(n,(function(t){if(s.tank.hreo&&s.tank.hreo.isAtomIn(t[0]+o,t[1]+e))throw"yes"}))}catch(t){return!0}return!1},S.prototype.getSideAtoms=function(t){switch(t){case p:return[[this.offsetRow+0,this.offsetCol+1],[this.offsetRow+1,this.offsetCol+0],[this.offsetRow+2,this.offsetCol+1]];case u:return[[this.offsetRow+1,this.offsetCol+0],[this.offsetRow+0,this.offsetCol+1],[this.offsetRow+1,this.offsetCol+2]];case l:return[[this.offsetRow+0,this.offsetCol+1],[this.offsetRow+1,this.offsetCol+2],[this.offsetRow+2,this.offsetCol+1]];case c:return[[this.offsetRow+1,this.offsetCol+0],[this.offsetRow+2,this.offsetCol+1],[this.offsetRow+1,this.offsetCol+2]]}},S.prototype.shoot=function(){var t=this;if(!(t.tank.status===y&&t.role===a||t.balls.length>=2)){var e=new b(this,(function(e){var o=t.balls.indexOf(e);o<=-1||t.balls.splice(o,1)}));t.balls.push(e)}},S.prototype.isAtomIn=function(t,e){return this.offsetRow<=t&&t<=this.offsetRow+2&&this.offsetCol<=e&&e<=this.offsetCol+2},S.prototype.isAtomInAtom=function(t,e){for(var o=0;o<this.balls.length;o++){var s=this.balls[o];if(s.available&&(s.offsetRow===t&&s.offsetCol===e))return s.available=!1,s.onUnAvailable&&s.onUnAvailable(s),!0}return!1},S.prototype.getDiffDirection=function(){var t;return this.direction===u?t=[l,c,p]:this.direction===l?t=[p,c,p]:this.direction===c?t=[l,u,p]:this.direction===p&&(t=[l,c,u]),t[i.random(0,t.length)]},A.prototype.updateAndApply=function(t){if(this.status===A.STATUS.SHOWING?Date.now()-(this.lastStepTime||0)>=this.showingStepTime&&(this.offsetRow+=1,this.offsetRow>=0&&(this.status=A.STATUS.SHOWED),this.lastStepTime=Date.now()):this.status===A.STATUS.SHOWED?Date.now()-(this.lastStepTime||0)>=this.moveStepTime&&("left"===this.way&&(this.offsetCol-=this.wayCount,this.offsetCol<0&&(this.way="right")),"right"===this.way&&(this.offsetCol+=this.wayCount,this.offsetCol+7>=this.tank.launch.screen.option.atomColCount&&(this.way="left")),this.shoot(),this.lastStepTime=Date.now()):this.status===A.STATUS.RUNAWAYING&&Date.now()-(this.lastStepTime||0)>=this.showingStepTime&&(this.offsetRow-=1,this.offsetRow<=-8&&(this.status=A.STATUS.RUNAWAYED,this.onRunAwayFun&&this.onRunAwayFun.call(this)),this.lastStepTime=Date.now()),i.mergeArr(this.fram,t,this.offsetRow,this.offsetCol),this.status===A.STATUS.SHOWED)for(var e=0;e<this.balls.length;e++){var o=this.balls[e];o.update(),o.available&&(t[o.offsetRow][o.offsetCol]=1)}},A.prototype.shoot=function(){var t=this;if(t.shooted)t.shooted=!1;else{t.shooted=!0;var e=new b(t,(function(e){var o=t.balls.indexOf(e);o<=-1||t.balls.splice(o,1)}));t.balls.push(e)}},A.prototype.hpDown=function(){this.hp-=1},A.prototype.getHp=function(){return this.hp},A.prototype.runAway=function(){this.status=A.STATUS.RUNAWAYING},A.prototype.setOnRunAway=function(t){this.onRunAwayFun=t},A.prototype.isAtomInGun=function(t,e){return this.status===A.STATUS.SHOWED&&(t===this.offsetRow+6&&this.offsetCol+3===e)},A.prototype.isAtomIn=function(t,e){return this.offsetRow<=t&&t<=this.offsetRow+6&&this.offsetCol<=e&&e<=this.offsetCol+6},A.STATUS={SHOWING:1,SHOWED:2,RUNAWAYING:3,RUNAWAYED:4},T.prototype.onRegLaunch=function(t){this.launch=t},T.prototype.getPreviewAtoms=function(){return Date.now()-this.preview_lasttime>=this.preview_timespace&&(this.preview_index++,this.preview_index>=this.previewAtom.length-1&&(this.preview_index=0),this.preview_lasttime=Date.now()),this.previewAtom[this.preview_index]},T.prototype.onLaunch=function(){O.call(this)},T.prototype.onUpdate=function(){if(this.status===C)return this.atoms;if(this.atoms=this.launch.screen.makeNewArr(),this.bossMod)this.boss&&this.boss.updateAndApply(this.atoms);else{if(this.tankers)for(var t=0;t<this.tankers.length;t++)this.tankers[t].update(),this.tankers[t].applyAtom(this.atoms);if(Date.now()-(this.gameLastTime||0)>=r[this.level]){if(x.call(this),this.tankers)for(var e=0;e<this.tankers.length;e++)this.tankers[e].updateEOF();this.gameLastTime=Date.now()}}return this.hreo&&(this.hreo.update(),this.hreo.applyAtom(this.atoms)),this.bomb&&this.status===y&&(this.bomb.update(),i.mergeArr(this.bomb.getCurrentFrame(),this.atoms,this.bomb.offsetRow,this.bomb.offsetCol)),this.atoms},T.prototype.onUpdateStatus=function(){return this.lifes},T.prototype.onDestroy=function(){this.hreo=void 0,this.score=0,this.level=0,this.tankers=[],this.bomb=void 0,this.status=k,this.boss=void 0,this.bossMod=!1,this.best=0,this.launch.screen.setBest(0),this.launch.screen.setScore(0),this.launch.screen.setLevel(0),this.launch.screen.setPause(!1)},T.prototype.onKeyup=function(t){"start"===t&&(this.status===C?(this.status=this.oldStatus,this.launch.screen.setPause(!1)):(this.oldStatus=this.status,this.status=C,this.launch.screen.setPause(!0)))},T.prototype.onKeyDown=function(t){if(this.hreo&&!this.autoMoving&&this.status!==C)if("up"===t){if(this.bossMod)return;this.hreo.moveToUp(1)}else if("right"===t)this.hreo.moveToRight(1,!!this.bossMod);else if("down"===t){if(this.bossMod)return;this.hreo.moveToBottom(1)}else"left"===t?this.hreo.moveToLeft(1,!!this.bossMod):"rotate"===t&&this.hreo.shoot()},T.prototype.goto=function(t,e){var o=this;o.autoMoving=!0,setTimeout((function s(){if(o.hreo.offsetCol!==t[1]){if(o.hreo.offsetCol<t[1])return o.hreo.moveToRight(1),void setTimeout(s,100);if(o.hreo.offsetCol>t[1])return o.hreo.moveToLeft(1),void setTimeout(s,100)}else if(o.hreo.offsetRow!==t[0]){if(o.hreo.offsetRow<t[0])return o.hreo.moveToBottom(1),void setTimeout(s,100);if(o.hreo.offsetRow>t[0])return o.hreo.moveToUp(1),void setTimeout(s,100)}else e&&e.call(o),o.autoMoving=!1}),200)},T.prototype.onEofKill=function(){this.score+=1,this.shotCount+=1,this.launch.screen.setScore(this.score),this.score>=this.best&&(this.best=this.score,this.launch.screen.setBest(this.best),i.storeSet("tankBest",this.best)),this.shotCount>=h[String(this.level)]&&this.levelUp()},T.prototype.levelUp=function(){var t=this;t.bossMod=!0,t.tankers=[],t.goto([this.launch.screen.option.atomRowCount-3,parseInt((this.launch.screen.option.atomColCount-1)/2-1)],(function(){t.hreo.turnTo(u),t.boss=new A(2,t.level+3,460,t),t.boss.setOnRunAway((function(){t.level+=1,t.shotCount=0,t.launch.screen.setLevel(t.level),t.boss=void 0,t.goto([parseInt((this.launch.screen.option.atomRowCount-1)/2-1),parseInt((this.launch.screen.option.atomColCount-1)/2-1)],(function(){t.bossMod=!1}))}))}))},T.prototype.onBossKill=function(){this.boss.hpDown(),this.boss.getHp()<=0&&this.boss.runAway()},T.prototype.onHeroKill=function(){this.status=y;var t=this;t.bomb=new n({offsetRow:t.hreo.offsetRow,offsetCol:t.hreo.offsetCol,onEnd:function(){D.call(t)}}),this.hreo=void 0},e.Tank=T},function(t,e,o){var s=o(0).WzwScreen,i="playing",n="pause",r="over",h=[[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,0,0],[0,1,1,1],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[0,1,1,1],[0,0,0,1],[0,0,0,0]],[[0,0,0,0],[0,0,1,0],[0,0,1,0],[0,1,1,0]],[[0,0,0,0],[0,1,1,1],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,1],[0,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,1],[0,0,1,0],[0,0,0,0]],[[0,0,0,0],[0,0,1,0],[0,1,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,1,0],[0,1,1,1],[0,0,0,0]],[[0,0,0,0],[0,0,1,0],[0,0,1,1],[0,0,1,0]],[[0,0,0,0],[0,1,1,0],[0,0,1,1],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,0,1,1],[0,0,0,0]],[[0,0,0,0],[0,0,1,0],[0,1,1,0],[0,1,0,0]],[[0,0,0,0],[0,0,1,0],[0,1,1,0],[0,1,0,0]],[[0,0,0,0],[0,0,1,1],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,0,1,1],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,0,0],[0,1,1,0],[0,0,1,0]],[[0,0,0,0],[0,1,0,0],[0,1,1,0],[0,0,1,0]]],a=[800,700,600,550,500,450,400,350,300,250,200,150,130,100,90,80,70,60,50,40,30,20,10,5],f={50:1,100:2,150:3,200:4,250:5,300:6,350:7,400:8,450:9,500:10,550:11,600:12,700:13,850:14,1e3:15,1100:16,1300:17,1500:18,2e3:19,2500:20,3e3:21,4e3:22,5e3:23};function u(){y.call(this),this.best=s.storeGet("tetrisBest")||0}function l(){var t=this;t.launch.screen.playAnim(s.ANIM.B2T,(function(e,o){0===o&&t.onDestroy()}))}function c(t){t>this.best&&p.call(this,t),this.launch.screen.setScore(t)}function p(t){this.best=t,s.storeSet("tetrisBest",t),this.launch.screen.setBest(t)}function m(t){this.launch.screen.setLevel(t)}function w(){for(var t=this,e=[],o=0;o<t.atomsed.length;o++){for(var i=!0,n=0;n<t.atomsed[o].length;n++)if(1!==t.atomsed[o][n]){i=!1;break}i&&(t.succAniming=!0,t.score+=1,e.push(o))}if(e.length>0){e.length>=4&&(t.score+=1),c.call(t,t.score);var r=f[String(t.score)];r>t.level&&(t.level=r,m.call(t,t.level));var h=!1;s.scroll(0,t.atoms[0].length-1,{goo:function(o){var i=t.atoms[0].length;o=o>=i?i:o;for(var n=function(o){s.each(e,(function(e,s){t.atoms[e][o]=0}))},r=0;r<o;r++)n(r)},end:function(o){for(var i=function(o){s.each(e,(function(e,s){t.atoms[e][o]=0}))},n=0;n<t.atoms[0].length;n++)i(n);setTimeout((function(){!function(){if(!h){for(h=!0;e.length>0;)for(var o=function(e){var o=e-1;t.atomsed[e]=[].concat(t.atomsed[o]),0===o&&(t.atomsed[o]=[],s.each(t.launch.screen.option.atomColCount,(function(e,s){t.atomsed[o][s]=0})))},i=e.shift();i>=1;i--)o(i);t.atoms=C(t.atomsed),t.succAniming=!1}}()}),50)}},240)}}function d(){var t=this;if(t.atoms&&t.stuff&&i===t.status){for(var e=[[],[],[],[]],o=t.stuffOffsetCol,n=0;n<t.stuff.length;n++)for(var r=0;r<t.stuff[n].length;r++){var h=r,a=t.stuff.length-1-n;if(e[h][a]=t.stuff[n][r],!(t.stuffOffsetRow+h<0)){if(t.stuffOffsetRow+h>=t.atoms.length)return;if(t.stuffOffsetCol+a>=t.atoms[0].length&&(t.stuffOffsetCol=t.atoms[0].length-a-1),t.stuffOffsetCol+a<0&&(t.stuffOffsetCol=0-a),1===t.atomsed[t.stuffOffsetRow+h][t.stuffOffsetCol+a])return void(t.stuffOffsetCol=o)}}t.stuff=e,t.atoms=s.mergeArr2(t.stuff,t.atomsed,t.stuffOffsetRow,t.stuffOffsetCol,(function(e,o,s,i){return 1===t.stuff[s][i]?t.stuff[s][i]:t.atomsed[e][o]}))}}function v(t){var e=this,o=e.stuffOffsetCol+t;if(e.atoms&&e.stuff&&e.atomsed&&e.status===i){for(var n=0;n<e.stuff.length;n++)for(var r=0;r<e.stuff[n].length;r++)if(1===e.stuff[n][r]&&(o+r<0?o=-r:o+r>e.atomsed[0].length-1&&(o=e.atomsed[0].length-r-1),!(e.stuffOffsetRow+n<0)&&1===e.atomsed[e.stuffOffsetRow+n][o+r]))return;e.stuffOffsetCol=o,e.atoms=s.mergeArr2(e.stuff,e.atomsed,e.stuffOffsetRow,e.stuffOffsetCol,(function(t,o,s,i){return 1===e.stuff[s][i]?e.stuff[s][i]:e.atomsed[t][o]}))}}function g(){return[].concat(h[s.random(0,h.length)])}function y(){this.preview_index=0,this.preview_lasttime=Date.now(),this.preview_timespace=200,this.previewAtom=[[[0,0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,0,0],[1,1,1,1,0,1,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,0,0],[1,1,1,1,0,1,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,0,0],[1,1,1,1,0,1,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,1,0],[0,1,0,1,0,0,0,0,1,0,0],[1,1,1,1,0,1,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1],[0,1,0,0,0,0,0,0,0,1,0],[0,1,0,1,0,0,0,0,1,1,0],[1,1,1,1,0,1,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,1,1],[0,1,0,1,0,0,0,0,1,1,0],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0],[0,1,0,0,1,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0],[0,1,0,0,1,0,0,0,0,0,0],[0,1,0,1,1,0,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,1,0,0,0,0,0],[0,1,0,1,1,0,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,1,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,1,0,0,1,1,1],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,1,0,0,1,1,1]],[[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,1,0,0,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,1,0,0,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,1,0,0,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0],[0,1,0,1,1,1,0,0,1,1,1]]]}function C(t){for(var e=[],o=0;o<t.length;o++){e[o]=[];for(var s=0;s<t[s].length;s++)e[o][s]=t[o][s]}return e}function k(t,e,o,s){var i=!1;t:for(var n=o.length-1;n>=0;n--)for(var r=o[n].length-1;r>=0;r--)if(1===o[n][r]){var h=e+n;if(!(h<0)){var a=t+r;if(!(a<0)){if(h!==s.length-1&&1!==s[h+1][a]||(i=!0),0===h&&i)throw new Error("gameover");if(i)break t}}}return i}u.prototype.onRegLaunch=function(t){this.launch=t},u.prototype.getPreviewAtoms=function(){return Date.now()-this.preview_lasttime>=this.preview_timespace&&(this.preview_index++,this.preview_index>=this.previewAtom.length-1&&(this.preview_index=0),this.preview_lasttime=Date.now()),this.previewAtom[this.preview_index]},u.prototype.reset=function(){this.atoms=this.launch.screen.makeNewArr(),this.atomsed=this.launch.screen.makeNewArr(),this.level=0,this.succAniming=!1,this.score=0,this.stuffOffsetRow=-3,this.stuffOffsetCol=3,this.gameLastTime=0,this.status=r,this.turbo=!1,this.launch.screen.setLevel(this.level),this.launch.screen.setScore(this.score),this.launch.screen.setBest(this.best)},u.prototype.turboModeON=function(){this.canTurbo&&(this.canTurbo=!1,this.turbo=!0)},u.prototype.turboModeOFF=function(){this.turbo=!1},u.prototype.onLaunch=function(){this.reset(),this.stuff=g.call(this),this.nextStuff=g.call(this),this.status=i,this.canTurbo=!0},u.prototype.onUpdate=function(){var t=this;if(t.atoms){if(Date.now()-t.gameLastTime>=(t.turbo?3:a[t.level])&&!t.succAniming){if(t.status===i)try{var e=!1;t.stuff||(t.stuff=t.nextStuff,t.nextStuff=null,e=!!t.stuff),t.stuff||(t.stuff=g.call(t),t.nextStuff=null,e=!!t.stuff),t.nextStuff||(t.nextStuff=g.call(t),e=!!t.stuff),e&&t.turboModeOFF();var o=k.call(t,t.stuffOffsetCol,t.stuffOffsetRow,t.stuff,t.atomsed);o||(t.stuffOffsetRow+=1,t.atoms=s.mergeArr2(t.stuff,t.atomsed,t.stuffOffsetRow,t.stuffOffsetCol,(function(e,o,s,i){return 1===t.stuff[s][i]?t.stuff[s][i]:t.atomsed[e][o]}))),o&&(t.atomsed=C(t.atoms),t.stuff=void 0,t.stuffOffsetRow=-3,t.stuffOffsetCol=3,w.call(t))}catch(e){"gameover"===e.message?(t.status=r,l.call(t)):console.error(e)}else t.status===n||t.status;t.gameLastTime=Date.now()}return t.atoms}},u.prototype.onUpdateStatus=function(){return this.nextStuff},u.prototype.pause=function(){this.status===i?(this.status=n,this.tempNextStuff=this.nextStuff,this.nextStuff=null,this.launch.screen.setPause(!0)):(this.status=i,this.nextStuff=this.tempNextStuff,this.tempNextStuff=null,this.launch.screen.setPause(!1))},u.prototype.onKeyup=function(t){"down"===t&&(this.turboModeOFF(),this.canTurbo=!0)},u.prototype.onKeyDown=function(t){if("reset"===t||"start"===t)this.pause();else if("left"===t){if(this.status===n)return;v.call(this,-1)}else if("right"===t){if(this.status===n)return;v.call(this,1)}else if("rotate"===t||"up"===t){if(this.status===n)return;d.call(this)}else if("down"===t){if(this.status===n)return;this.turboModeON()}},u.prototype.onDestroy=function(){this.reset(),this.launch.screen.setBest(0),this.launch.screen.setScore(0),this.launch.screen.setPause(!1),this.launch.exitCurentGame()},e.Tetris=u},function(t,e,o){var s=o(0).WzwScreen,i=[[[0,0],[1,0]],[[1,0],[1,0]],[[1,0],[1,1]],[[1,1],[1,1]]],n=[800,600,500,400,300,200,100],r=[15,15,15,12,12,10,10];function h(t,e,o){this.blocktype=t,this.rowOffset=e,this.colOffset=o}function a(){this.initPreview()}function f(){this.blocks=[c(this.screen.option.atomRowCount-2,0),c(this.screen.option.atomRowCount-2,3),c(this.screen.option.atomRowCount-2,6)]}function u(){f.call(this),this.life-=1,0===this.life&&this.launch.exitCurentGame()}function l(){this.checkBlocks=[c(-2,0),c(-2,3),c(-2,6)]}function c(t,e){return new h(s.random(0,i.length),t,e)}h.prototype.setOnCheckListener=function(t){this.checkListener=t},h.prototype.downdown=function(){this.rowOffset+=1},h.prototype.upup=function(){this.rowOffset-=1},h.prototype.isSameWith=function(t){return this.blocktype===t.blocktype},h.prototype.renderInAtoms=function(t){var e=i[this.blocktype];s.mergeArr(e,t,this.rowOffset,this.colOffset,(function(o,s,i,n){return 1===t[o][s]||1===e[i][n]?1:0}))},h.prototype.change=function(){this.blocktype+1>=i.length?this.blocktype=0:this.blocktype+=1},a.prototype.onRegLaunch=function(t){this.launch=t,this.screen=t.screen},a.prototype.getPreviewAtoms=function(){var t;return Date.now()-(this.previewLastTime||0)>=this.previewTimeSpace&&(t=this.previewArr[this.previewIndex],this.previewIndex++,this.previewIndex>=this.previewArr.length-1&&(this.previewIndex=0),this.previewLastTime=Date.now()),t},a.prototype.onLaunch=function(){this.status="playing",this.best=s.storeGet("Copyor_best")||0,this.screen.setBest(this.best),this.life=3,this.score=0,this.level=0,this.levelDissCount=0,this.lastCheckerTime=Date.now(),this.lastBlockTime=Date.now(),u.call(this),l.call(this)},a.prototype.getLevelTime=function(){return this.level>=n.length?n[n.length-1]:n[this.level]},a.prototype.canLevelUp=function(){var t;return t=this.level>=r.length?r[r.length-1]:r[this.level],this.levelDissCount>=t},a.prototype.onUpdate=function(){if(void 0!==this.blocks){var t=this.screen.makeNewArr();if(void 0!==this.checkBlocks){for(var e=0;e<this.checkBlocks.length;e++)this.checkBlocks[e].renderInAtoms(t);if(Date.now()>=this.lastCheckerTime+this.getLevelTime()){for(var o=0;o<this.checkBlocks.length;o++)this.checkBlocks[o].downdown();this.lastCheckerTime=Date.now()}}for(var i=0;i<this.blocks.length;i++)if(this.blocks[i].renderInAtoms(t),Date.now()>=this.lastBlockTime+30&&this.autoUp){for(var n=0;n<this.blocks.length;n++)this.blocks[n].upup();this.lastBlockTime=Date.now()}if("playing"!==this.status)return t;if(void 0!==this.checkBlocks&&void 0!==this.blocks&&this.checkBlocks[0].rowOffset>=this.blocks[0].rowOffset){for(var r=!1,h=0;h<this.checkBlocks.length;h++){if(!this.checkBlocks[h].isSameWith(this.blocks[h])){r=!1;break}r=!0}if(r)this.score+=1,this.screen.setScore(this.score),this.levelDissCount+=1,this.score>=this.best&&(this.best=this.score,this.screen.setBest(this.best),s.storeSet("Copyor_best",this.best)),this.canLevelUp()&&(this.level+=1,this.levelDissCount=0,this.screen.setLevel(this.level)),f.call(this),l.call(this);else if(this.checkBlocks[0].rowOffset>=this.screen.option.atomRowCount-2){this.oldStatus=this.status,this.status="dieing";var a=this;this.screen.playAnim(s.ANIM.T2B,(function(t,e){1===e&&(a.status=a.oldStatus,u.call(a),l.call(a))}))}else for(var c=0;c<this.blocks.length;c++)this.blocks[c].rowOffset=this.screen.option.atomRowCount-2;this.autoUp=!1}return t}},a.prototype.onUpdateStatus=function(){for(var t=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],e=0;e<this.life;e++)t[3-e]=[1,1,1,1];return t},a.prototype.onDestroy=function(){this.blocks=void 0,this.life=0,this.level=0,this.levelDissCount=0,this.blocks=void 0,this.checkBlocks=void 0,this.screen.setLevel(0),this.screen.setScore(0),this.screen.setBest(0),this.screen.setPause(!1),this.status="stoped",this.autoUp=!1},a.prototype.onKeyup=function(t){if(void 0!==this.blocks)return"pause"===this.status&&"start"===t?(this.status="playing",void this.screen.setPause(!1)):void("playing"===this.status&&("left"===t?this.blocks[0].change():"up"===t?this.blocks[1].change():"right"===t?this.blocks[2].change():"rotate"===t?this.autoUp=!0:"start"===t&&(this.screen.setPause(!0),this.status="pause")))},a.prototype.onKeyDown=function(){},a.prototype.initPreview=function(){this.previewIndex=0,this.previewTimeSpace=200,this.previewArr=[[[0,1,0,0,1,1,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,1,1,0,0],[0,1,1,0,1,1,0,1,1,0,0]],[[0,1,0,0,1,1,0,1,0,0,0],[0,1,0,0,1,1,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,1,1,0,0],[0,1,1,0,1,1,0,1,1,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,1,0,1,0,0,0],[0,1,0,0,1,1,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,1,1,0,0],[0,1,1,0,1,1,0,1,1,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,1,0,1,0,0,0],[0,1,0,0,1,1,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,0,0,1,1,0,0],[0,1,0,0,1,1,0,1,1,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,1,0,1,0,0,0],[0,1,0,0,1,1,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,1,0,1,1,0,0],[0,1,0,0,1,1,0,1,1,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,1,0,1,0,0,0],[0,1,0,0,1,1,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,1,0,1,0,0,0],[0,1,0,0,1,1,0,1,1,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,1,0,1,0,0,0],[0,1,0,0,1,1,0,1,1,0,0],[0,1,0,0,1,1,0,1,0,0,0],[0,1,0,0,1,1,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,1,0,1,0,0,0],[0,1,0,0,1,1,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]]]},e.Copyor=a},function(t,e,o){var s=o(0),i=s.WzwScreen,n=s.WzwBomb,r=[320,280,240,200,160,120,80,40],h=[21,23,26,29,31,34,37,40,45,50,60,70,80,90,100,120,140,160,200,250,300,400,500,1e3],a=0,f=1,u=2,l=3,c=4;function p(t,e,o,s){this.atoms=[[0,1,0],[1,1,1],[0,1,0],[1,0,1]],this.offsetCol=o,this.offsetRow=e,this.wzwScreen=s,this.name=t}function m(t){this.left=[],this.right=[],this.wzwScreen=t,this.offsetRow=-t.option.atomRowCount;for(var e=1,o=0;o<t.option.atomRowCount;o++)this.left.push([e>0?1:0]),this.right.push([e>0?1:0]),e+1>2?e=0:e+=1}function w(){this.status=a,this.initPreview()}p.prototype.setOnOutScreenListener=function(t){this.outScreenListener=t},p.prototype.left=function(){this.offsetCol-3>0&&(this.offsetCol=this.offsetCol-3)},p.prototype.right=function(){this.offsetCol+3<=7&&(this.offsetCol=this.offsetCol+3)},p.prototype.isCarBoom=function(t){return!!t&&(this.offsetCol===t.offsetCol&&(t.offsetRow>=this.offsetRow&&t.offsetRow<=this.offsetRow+3||this.offsetRow>=t.offsetRow&&this.offsetRow<=t.offsetRow+3))},p.prototype.update=function(){"other"===this.name&&(this.offsetRow=this.offsetRow+1),this.offsetRow>this.wzwScreen.option.atomRowCount&&this.outScreenListener&&this.outScreenListener(this)},p.prototype.render=function(t){var e=this;i.mergeArr(this.atoms,t,this.offsetRow,this.offsetCol,(function(o,s,i,n){return 1===t[o][s]?1:e.atoms[i][n]}))},m.prototype.update=function(){if(this.offsetRow<0)this.offsetRow+=1;else{var t=this.left.pop();this.left.splice(0,0,t);var e=this.right.pop();this.right.splice(0,0,e)}},m.prototype.render=function(t){i.mergeArr(this.left,t,this.offsetRow,0,void 0),i.mergeArr(this.right,t,this.offsetRow,this.wzwScreen.option.atomColCount-1,void 0)},w.prototype.onRegLaunch=function(t){this.launch=t,this.wzwScreen=t.screen},w.prototype.getPreviewAtoms=function(){var t;return Date.now()-(this.previewLastTime||0)>=this.previewTimeSpace&&(t=this.previewArr[this.previewIndex],this.previewIndex++,this.previewIndex>=this.previewArr.length&&(this.previewIndex=0),this.previewLastTime=Date.now()),t},w.prototype.useNewPlayer=function(){for(var t=void 0,e=0;e<this.players.length;e++)if(1===this.players[e][0]){this.players[e][0]=0,this.players[e][1]=0,this.players[e][2]=0,this.players[e][3]=0,this.turbo=!1,t=new p("me",this.wzwScreen.option.atomRowCount-6,this.wzwScreen.option.atomColCount-7,this.wzwScreen);break}if(void 0===t){this.status=c;var o=this;this.launch.screen.playAnim(i.ANIM.B2T,(function(t,e){0===e&&o.onDestroy()}))}else this.boom=void 0,this.others=[],this.road=new m(this.wzwScreen),this.status=u;return t},w.prototype.onLaunch=function(){this.atoms=this.wzwScreen.makeNewArr(),this.status=u,this.turbo=!1,this.level=1,this.score=0,this.count=0,this.best=i.storeGet("speed_best")||0,this.boom=void 0,this.players=[[0,0,0,0],[1,1,1,1],[1,1,1,1],[1,1,1,1]],this.wzwScreen.setBest(this.best),this.player=this.useNewPlayer()},w.prototype.onScroeChange=function(t){this.score=t,this.score>this.best&&(this.best=this.score,this.wzwScreen.setBest(this.best),i.storeSet("speed_best",this.best)),this.count=this.count+1,this.wzwScreen.setScore(this.score),this.count>h[this.level-1]&&(this.count=0,this.level=this.level+1,this.wzwScreen.setLevel(this.level))},w.prototype.createOther=function(t){var e=new p("other",t,[1,4,7][i.random(0,3)],this.wzwScreen),o=this;return e.setOnOutScreenListener((function(t){if(o.others){var e=o.others.findIndex((function(e){return t===e}));-1!==e&&(o.score+=100,o.onScroeChange(o.score),o.others.splice(e,1))}})),e},w.prototype.randomCreateOthers=function(){void 0===this.others&&(this.others=[]),this.others.length<=0&&this.others.push(this.createOther(-5));var t=this.others[0];t&&t.offsetRow>=0&&this.others.length<4&&this.others.splice(0,0,this.createOther(t.offsetRow-10))},w.prototype.onPlayerDie=function(){var t=this;t.status=l,t.boom=new n({offsetRow:t.player.offsetRow,offsetCol:t.player.offsetCol,onEnd:function(){t.status=u,t.player=t.useNewPlayer()}})},w.prototype.onUpdate=function(){if(this.atoms){if(this.status===f)return this.atoms;if(this.atoms=this.wzwScreen.makeNewArr(),this.status===u&&Date.now()-(this.gameLastTime||0)>(this.turbo?16:r[this.level-1]||r[r.length-1])){if(this.randomCreateOthers(),this.road.update(this.atoms),this.player&&this.player.update(),this.others&&this.others.length>0)for(var t=0;t<this.others.length;t++)this.others[t].update();if(this.others&&this.others.length>0)for(var e=0;e<this.others.length;e++)if(this.others[e].isCarBoom(this.player)){this.onPlayerDie();break}this.gameLastTime=Date.now()}if(this.others&&this.others.length>0)for(var o=0;o<this.others.length;o++)this.others[o].render(this.atoms);return this.road.render(this.atoms),this.player&&this.player.render(this.atoms),this.boom&&this.boom.update(),this.boom&&this.boom.render(this.atoms),this.wzwScreen.setLevel(this.level),this.atoms}},w.prototype.onUpdateStatus=function(){if(this.players)return this.players},w.prototype.onDestroy=function(){this.wzwScreen.setLevel(0),this.wzwScreen.setScore(0),this.wzwScreen.setPause(!1),this.wzwScreen.setBest(0),this.boom=void 0,this.turbo=!1,this.launch.exitCurentGame()},w.prototype.onKeyup=function(t){"rotate"===t&&(this.turbo=!1)},w.prototype.onKeyDown=function(t){this.status!==f?("rotate"===t&&(this.turbo=!0),this.status===u&&("left"===t?this.player.left():"right"===t?this.player.right():"start"===t&&(this.status=f,this.wzwScreen.setPause(!0)))):"start"===t&&(this.status=u,this.wzwScreen.setPause(!1))},w.prototype.initPreview=function(){this.previewIndex=0,this.previewTimeSpace=120,this.previewArr=[[[1,0,1,0,0,0,0,0,0,0,1],[1,1,1,1,0,0,0,0,0,0,1],[0,0,1,0,0,0,0,0,0,0,0],[1,1,0,1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[0,0,0,0,0,1,0,0,1,0,0],[1,0,0,0,1,1,1,1,1,1,1],[1,0,0,0,0,1,0,0,1,0,1],[0,0,0,0,1,0,1,1,0,1,0],[1,0,0,0,0,0,0,0,0,0,1]],[[0,0,0,0,0,0,0,0,0,0,0],[1,0,1,0,0,0,0,0,0,0,1],[1,1,1,1,0,0,0,0,0,0,1],[0,0,1,0,0,0,0,0,0,0,0],[1,1,0,1,0,0,0,0,0,0,1],[1,0,0,0,0,1,0,0,0,0,1],[0,0,0,0,1,1,1,0,1,0,0],[1,0,0,0,0,1,0,1,1,1,1],[1,0,0,0,1,0,1,0,1,0,1],[0,0,0,0,0,0,0,1,0,1,0]],[[1,0,0,0,0,0,0,1,0,1,1],[0,0,0,0,0,0,0,0,0,0,0],[1,0,1,0,0,0,0,0,0,0,1],[1,1,1,1,0,0,0,0,0,0,1],[0,0,1,0,0,0,0,0,0,0,0],[1,1,0,1,0,1,0,0,0,0,1],[1,0,0,0,1,1,1,0,0,0,1],[0,0,0,0,0,1,0,0,1,0,0],[1,0,0,0,1,0,1,1,1,1,1],[1,0,0,0,0,0,0,0,1,0,1]],[[1,0,0,0,0,0,0,0,1,0,1],[1,0,0,0,0,0,0,1,0,1,1],[0,0,0,0,0,0,0,0,0,0,0],[1,0,1,0,0,0,0,0,0,0,1],[1,1,1,1,0,0,0,0,0,0,1],[0,0,1,0,0,1,0,0,0,0,0],[1,1,0,1,1,1,1,0,0,0,1],[1,0,0,0,0,1,0,0,0,0,1],[0,0,0,0,1,0,1,0,1,0,0],[1,0,0,0,0,0,0,1,1,1,1]],[[0,0,0,0,0,0,0,1,1,1,0],[1,0,0,0,0,0,0,0,1,0,1],[1,0,0,0,0,0,0,1,0,1,1],[0,0,0,0,0,0,0,0,0,0,0],[1,0,1,0,0,0,0,0,0,0,1],[1,1,1,1,0,1,0,0,0,0,1],[0,0,1,0,1,1,1,0,0,0,0],[1,1,0,1,0,1,0,0,0,0,1],[1,0,0,0,1,0,1,0,0,0,1],[0,0,0,0,0,0,0,0,1,0,0]],[[1,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,1,1,1,0],[1,0,0,0,0,0,0,0,1,0,1],[1,0,0,0,0,0,0,1,0,1,1],[0,0,0,0,0,0,0,0,0,0,0],[1,0,1,0,0,1,0,0,0,0,1],[1,1,1,1,1,1,1,0,0,0,1],[0,0,1,0,0,1,0,0,0,0,0],[1,1,0,1,1,0,1,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1]],[[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,1,1,1,0],[1,0,0,0,0,0,0,0,1,0,1],[1,0,0,0,0,0,0,1,0,1,1],[0,0,0,0,0,1,0,0,0,0,0],[1,0,1,0,1,1,1,0,0,0,1],[1,1,1,1,0,1,0,0,0,0,1],[0,0,1,0,1,0,1,0,0,0,0],[1,1,0,1,0,0,0,0,0,0,1]],[[0,1,0,1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,1,1,1,0],[1,0,0,0,0,0,0,0,1,0,1],[1,0,0,0,0,1,0,1,0,1,1],[0,0,0,0,1,1,1,0,0,0,0],[1,0,1,0,0,1,0,0,0,0,1],[1,1,1,1,1,0,1,0,0,0,1],[0,0,1,0,0,0,0,0,0,0,0]],[[1,0,1,0,0,0,0,0,0,0,1],[0,1,0,1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,1,1,1,0],[1,0,0,0,0,1,0,0,1,0,1],[1,0,0,0,1,1,1,1,0,1,1],[0,0,0,0,0,1,0,0,0,0,0],[1,0,1,0,1,0,1,0,0,0,1],[1,1,1,1,0,0,0,0,0,0,1]],[[1,1,1,1,0,0,0,0,0,0,1],[1,0,1,0,0,0,0,0,0,0,1],[0,1,0,1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,1,0,1,1,1,0],[1,0,0,0,1,1,1,0,1,0,1],[1,0,0,0,0,1,0,1,0,1,1],[0,0,0,0,1,0,1,0,0,0,0],[1,0,1,0,0,0,0,0,0,0,1]]]},e.Speed=w}]);