<!DOCTYPE html>

<html lang="zh-CN">

<head>

    <meta charset="utf-8">

    <title>福利二选一短信包自助订购</title>

    <meta name="keywords" content="">

    <meta name="description" content="">

    <meta name="renderer" content="webkit">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <meta name="apple-mobile-web-app-capable" content="yes">

    <meta name="format-detection" content="telephone=no">

    <meta HTTP-EQUIV="pragma" CONTENT="no-cache">

    <meta HTTP-EQUIV="Cache-Control" CONTENT="no-store, must-revalidate">

    <meta HTTP-EQUIV="expires" CONTENT="Wed, 26 Feb 1997 08:21:57 GMT">

    <meta HTTP-EQUIV="expires" CONTENT="0">

</head>

<script src="//lib.baomitu.com/jquery/1.12.4/jquery.min.js"></script>

<body>

    <div class="content">

        <div class="panel-body form-inline">

            <div class="input-group">

                <div class="input-group-addon">手机号</div>

                <input type="text" class="form-control input-lg" id="phone" placeholder="请输入手机号">

            </div>

        </div>

        <div class="panel-body form-inline">

            <div class="input-group">

                <div class="input-group-addon">验证码</div>

                <input type="text" class="form-control input-lg" id="code" placeholder="请输入验证码">

            </div>

        </div>

        <div class="panel-body form-inline">

            <div class="input-group form-group">

                <div class="input-group-prepend">

                    <button type="button" class="btn btn-primary" onclick="get_sms()" id="get_sms">获取验证码</button>

                    <button type="button" class="btn btn-primary" onclick="order()" id="order">订购(点击一次就行)</button>

                </div>

            </div>

        </div>

    </div>

*如果不行就多提交几次*

    <script type="text/javascript">

        function get_sms() {

            var phone = $('#phone').val();

            if (phone == '') {

                alert('请输入手机号');

                return false;

            }

            $.ajax({

                type: 'GET',

                url: 'http://www.73110010.com/cs/event/getPackageCodeVip?mobile=' + phone,

                dataType: 'json',

                complete: function (XMLHttpRequest, textStatus) {

                    alert('已发送验证码,非王卡不能订购成功');

                }

            });

        }

        function order() {

            var phone = $('#phone').val();

            if (phone == '') {

                alert('请输入手机号');

                return false;

            }

            var code = $('#code').val();

            if (code == '') {

                alert('请输入验证码');

                return false;

            }

            alert('正在提交,需要较长时间,不要重复点击,10s后没有消息就去业务办理记录中查看');

            $('#order').hide();

            $.ajax({

                type: 'GET',

                url: 'request.php?act=submit&phone=' + phone +

                    '&code=' + code,

                dataType: "json",

                success: function (json) {

                    alert(json.desc);

                    if(json.code==8){

                        alert(json.e);

                    }

                }

            });

        }

    </script>

</body>

</html>
